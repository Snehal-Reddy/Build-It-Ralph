# Build-It-Ralph üèóÔ∏è

Build-It-Ralph is a **Gemini CLI extension** that empowers you to create custom, autonomous AI agent loops (Ralph Loops) directly within your terminal.

It acts as a **Meta-Agent Architect**: instead of writing complex agent scripts from scratch, you simply chat with the `/setup_ralph` wizard. It interviews you about your goals, desired workflow phases (e.g., Plan ‚Üí Code ‚Üí Test), and failure recovery strategies, then **automatically generates** the entire configuration, prompt templates, and state management hooks needed to run your custom loop.

Once set up, the **Ralph Loop Engine** takes over, managing the agent's state, clearing context between phases, and executing your defined workflow in an infinite, self-correcting cycle.

---

## Features ‚ú®

- **Autonomous Workflow Generation:** Interactive wizard (`/setup_ralph`) to design your loop.
- **Context Management:** Automatically clears context between phases to maintain agent focus and reduce costs.
- **State Persistence:** Tracks the loop's progress in `.gemini/ralph/state.json`, allowing it to resume after interruptions.
- **Customizable Phases:** Define any sequence of steps (e.g., `RESEARCH` -> `DRAFT` -> `REVIEW` -> `PUBLISH`).
- **Failure Recovery:** Automatically runs cleanup commands (e.g., `git reset --hard`) and restarts the loop upon failure.

---

## Installation üì¶

1.  **Install the Extension:**

    ```bash
    gemini extensions install https://github.com/Snehal-Reddy/Build-It-Ralph.git
    ```

2.  **Configure Gemini CLI:**
    To allow Ralph to manage its state and execute hooks, you must update your `~/.gemini/settings.json`:

    ```json
    {
      "hooksConfig": {
        "enabled": true
      },
      "context": {
        "includeDirectories": ["~/.gemini/extensions/ralph-loop"]
      }
    }
    ```

    > **Note**: `includeDirectories` is required so that the Gemini CLI can access and execute Ralph's internal scripts (`ralph_loop_engine.py`) and hook logic located in the extension's installation directory.

---

## Usage üöÄ

### 1. Design Your Loop

Run the setup wizard to create your custom agent loop:

```bash
/setup_ralph
```

The wizard will ask you for:

- **Objective:** What is the agent trying to achieve? (e.g., "Fix bugs in this repo")
- **Phases:** What steps should it take? (e.g., `PLAN`, `CODE`, `TEST`)
- **Cleanup:** What to do if it fails? (e.g., `git checkout .`)

### 2. Start the Loop

Once configured, start the autonomous process:

```bash
/ralph
```

The agent will begin executing the first phase of your defined workflow.

### 3. Safety First üõ°Ô∏è

**Always run in sandbox mode for safety.** The agent executes shell commands autonomously.

- **Sandbox Mode:** strictly limits the agent's access to the filesystem.
- **YOLO Mode (`-y`):** highly recommended for autonomous loops to prevent constant prompts for tool execution.

**Recommended Launch Command:**

```bash
gemini -y --sandbox_mode=standard
```

---

## How It Works ‚öôÔ∏è

1.  **State File (`.gemini/ralph/state.json`)**: Stores the current phase, status (`ACTIVE`, `COMPLETED`, `FAILED`), and iteration count.
2.  **Hook (`hooks/ralph_loop_engine.py`)**: A script that runs **after every agent turn**.
    - It checks the `status` in the state file.
    - If `COMPLETED`: It advances to the next phase, updates the state, and **clears the agent's context** to start fresh with the new phase's prompt.
    - If `FAILED`: It executes the defined cleanup command and resets the loop to the first phase.
3.  **Prompts (`.gemini/ralph/prompts/`)**: Markdown templates for each phase, generated by the wizard, containing the specific instructions and context for the agent.
